### 现在HZERO服务选配生成application.yml和bootstrap.yml不正常
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314200634891-298428563.png)

>选的什么版本

1.2.1.RELEASE SAAS

>刚刚权限有问题，现在试一下

还是一样的

>我验证一下

猪齿鱼 GitLab 的仓库权限貌似全部被重置了
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314200734003-1228480024.png)

>公司安全审计要求
>未来需要安装的可能需要申请权限了

明白了

请问一下，需要我们怎么申请呢？向谁提出申请？

>现在先私聊找我好了



### 麻烦问一下，配置了数据权限，在插入数据的时候，没有找配置的数据库前缀，是什么原因呢？

>插入不行

好的，谢谢

>只支持跨库查询，插入的话，表在哪个微服务，就应该在哪个微服务操作，不要串起来

好的


### 升级文档中的地址失效了
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314201340737-494502278.png)

>现在的权限改了，需要的向我申请  后面会线上管理

好


### 请问数据导出，怎么样导出选中的那一行数据，而不是导出全部的数据呢
>generator？
>呃，就是你导出数据说的是系统里面的功能还是说的用hzero-generator工具导数据

用的HZERO的导出组件
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314201704466-1440771950.png)

>这个你们可以结合这个组件，前端单行选了之后，形成唯一条件传到后端做限制，这样也可以做



### 消息服务的端口开出来了， 但是前端通过ws连的时候报404是什么原因？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314201241377-1983934573.png)

>什么版本？  帮忙支持下

1.2.0

>这个版本已经不需要暴露消息服务了，直接走的网关

>http://hzeronb.saas.hand-china.com/hpfm/sock-js g
 
这个配置什么？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314201458294-750660176.png)


>是的，参考这个http://hzeronb.saas.hand-china.com/hpfm/sock-js

1.1.0版本的ws也是走网关的吗？

>是的

好的， 谢谢



### 问一下，关于redis 库指定，只需要设置spring下面的么，还是hzero的也要设置
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314201800156-155946400.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314201804932-1757011501.png)


### 请问一下，job通过接口平台客户端interfaceInvokeSdk调用内部接口的时候无法获取当前用户DetailsHelper.getUserDetails()。该如何处理？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314201819421-1438237182.png)

>什么版本

1.2
 
>任务是新建的吗
 
 是的
 
>调度任务里面能获取用户信息吗  看一下
 
调度任务里面是可以的


### 请问一下，job任务采用多线程方式，子线程无法获取当前用户信息DetailsHelper.getUserDetails()。改如何处理？

>子线程？用户信息是线程变量，不能跨线程

因为是采用多线程方式处理数据，需要调用外部接口，。但是采用interfaceInvokeSdk方式调用的时候InterfaceLogDTO会去获取用户信息。我需要采用interfaceInvokeSdk调用接口就不能用多线程吗？

>子线程是获取不到用户信息的，你可以在启动线程的时候拷贝用户信息

 好的，我试试。谢谢！！！
 
 

### 请问大佬，hzero admin账号登录显示所属组织无效，如何解决？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314202124089-1288460882.png)

oauth 的报错是这样的 
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314202208726-1522201156.png)

>你看看hpfm_tenant表中默认租户ID，改成0   hpfm_group的默认集团ID也改成0

好了，感谢


### 请教大佬，lov值集视图修改后，预览是对的，页面调还是不对的，在哪里刷新lov视图的缓存

>检查下是不是一个code，这个应该是一样，只是使用的地方可能会传参数，数据可能会不一样

code是同一个，参数也没变化，就是视图显示的时候，还是之前不对的那个展示

>视图编辑后保存下，检查调用的环境是否一致

嗯，调用的环境是一致的



### 请问大佬，error.permission.routeNotFound 503，服务和路由信息都有，也刷新了路由，依然路由报错，如何定位？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314202349029-952687312.png)

>检查 admin 服务是否正常，网关会向 admin 拉取服务路由信息
>可以看下 gateway 的日志

hzero版本是1.0.X 没有admin服务，gateway报错如下
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314202445278-613052071.png)

>那检查 config 配置中心是否正常，gateway是否启用了配置中心

未发现config异常报错
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314202539634-803808738.png)

>gateway 启用配置中心没有

启用了，我把gateway 和config重启一下

解决了，是因为gateway没有识别到 k8s里面的 config service，导致拿不到配置



### 请问通用导入的表结构变化需要自己手动修改么
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314202610264-488978584.png)

>你是升级了，没有升级成功表结构?

应该是升级了，这个表没有动，测试出现问题了
这个表是我们自己的服务中的，hzero升级应该更新不到我们自己服务中的表吧

1.2.0

>开启导入客户端的init-data配置，会更新这个表的

是这个么
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314203715678-2138629132.png)

>是的

只能新建不能更新哦
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314203804994-1818571254.png)

>你的changlog可能有问题
>你的表原来是怎么建的
>清理一下相关的changlog，重新跑吧


### 请问下调度任务执行已经完成了但是日志显示一直是运行中是怎么回事？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314202514362-1967945315.png)



### 各位大佬下午好，是不是角色层级是租户层 的角色是无法分配到 这几个权限的？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314202227553-1323927394.png)

>这些只有平台级功能


 
### 问下大佬  组织管理 里面 对公司 的创建  有个注册地址
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314201902803-2060313325.png)

公司的注册地址 没有下拉  手工填写也不行

>这是国家定义下面没维护数据吧  先去国家定义下面维护数据就可以了

好的
公司建立成功 ，谢谢 
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314202014609-1819003065.png)



### 请问各位大佬，Excel导出出现这个问题是啥原因？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314202707669-1330291543.png)

在做多sheet页导出的时候出现的问题

>看下服务端日志

就是我调用接口的日志把

>是的

里面没有异常，就只有一些日志打印出来，但是不影响导出流程的
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314203542094-917207368.png)

>这是提供导出接口的服务日志？

是的

>应该是有异常信息的 你看下是什么原因 不行你就打端点看吧 ExcelExporter这个类

好的


### hzero1.2.0版本）我发现hzero上传的文件配置加载的到redis 有个问题，不知道是不是bug：
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314202027644-1385262120.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314202032237-1837666567.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314202036258-707111574.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314202040085-858352350.png)


### 请问以下，有人遇到过这个问题吗？，hzero-file服务
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314203837487-1393163429.png)

>http://hzerodoc.saas.hand-china.com/zh/docs/faq/file/

多谢


### 请问一下，文件服务，我配置minio服务的时候，第一次保存成功了，然后刷新页面，再编辑，就没办法保存了，都会报这个错误，
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314203902611-1107113592.png)

>什么版本

这个
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314203936255-1829035825.png)

>1.2我没有复现，是不是有人同时操作了

没有人同时操作
然后我刷新一下页面，再去编辑保存，也会报错   版本与记录不一致

>看下objectVersionNumber和数据库对比一下

都是1
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314204112301-603324430.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314204116463-2007900303.png)

保存的时候也是1
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314204136769-1433276401.png)

>服务日志呐 看一下

![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314204155631-1052747861.png)

>私聊吧

好的



### 给角色分配客户端的时候 报这个错，是指什么数据缺失了嘛？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314204211092-654184972.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314204219504-1406780992.png)



### 请问一下，消息服务的这三个短信配置是可用的吗
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314204013929-824427539.png)
我新建了一个消息发送配置，测试发送都报这个错
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314204027465-1898605644.png)

>短信模板是要向供应商申请的

好的

>配置可以用，但是你的外部编码不对

外部编码有什么要求吗

>跟供应商申请模板，供应商会给一个模板编码，就是我们的外部编码

哦哦，我知道了  谢谢





### 请教一个问题啊，对于这种返回的Key值是return的返回报文该怎么去接收他呢？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314203627290-1867063043.png)

实体类不能用return来定义啊
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314203641211-2072800189.png)





### 各位大佬好 这个多言弹窗为什么报错呀
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314204542337-84564361.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314204554045-2140797547.png)



### 请问下hzero-resource的git权限要怎么申请


### 请问下调度任务执行已经完成了但是日志显示一直是运行中是怎么回事？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314204612694-692719038.png)

>这个
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314204630294-1492254511.png)

好的，我试试。
可以了，感谢。




### 请问调用这个接口的时候，一直报错After warp[64578,61413] : CustomUserDetails{userId=64578, realName='替代账号1', email='1@1.com', timeZone='GMT+8', language='zh_CN', roleId=184550, roleAssignLevel='organization', roleAssignValue=61413, roleIds=[184550], tenantId=61413, tenantIds=[61413], organizationId=61413, isAdmin=false, clientId=null, clientName='null', clientAuthorizedGrantTypes=null, clientResourceIds=null, clientScope=null, clientRegisteredRedirectUri=null, clientAccessTokenValiditySeconds=null, clientRefreshTokenValiditySeconds=null, clientAutoApproveScopes=null, additionInfo=null} io.choerodon.core.oauth.CustomUserDetails@b8404bba: Username: test1; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Not granted any authorities
2020-03-13 19:52:47.064  INFO 12152 --- [ XNIO-3 task-73] o.s.s.o.provider.endpoint.TokenEndpoint  : Handling error: ArrayIndexOutOfBoundsException, 6
这个是怎么回事
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314204706675-1378419626.png)

>你的信息提供全面点，把你调用的接口信息，维护的client信息都发出来

zheg 
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314204726952-533109964.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314204734562-1994385793.png)
   
>你这是哪个版本

0.8 release
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314204754052-1467728011.png)

追踪代码是到这个类了，但是不知道怎么报的错
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314204828119-554866570.png)

>调试 TokenEndpoint 这个类 


找不到这个类在哪

>搜啊 这是security 下的

我这边没源码的

>这是开源的

![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314204857064-1858645395.png)

>看 oauth/token 那个接口，断点调试下



### 请问一下，登录的时候报这个错是为什么？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314204923558-1083808571.png)

>你看 oauth_client 表有没有你这个客户端

没有，这个是生产环境，没有生产环境的客户端
这个要怎么添加？

>那你为什么要用不存在的client
>可以在客户端管理里新增

这个和docker容器启动的参数有关吗？我记得之前是可以登录成功的

>你不是说表中都没有那个 client_id 吗，跟docker没啥关系，要么新增一个客户端，要么用表中有的客户端

好的


### 大佬们晚上好，请教一下为什么 我现在给角色分配客户端的时候 前端不会把客户端的id 作为memberid传到后台？导致后端报错
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200314204941700-474488267.png)

>你在客户端去分配角色吧，这个问题我们看看

客户端里分配角色 会报403

>403就按照403的处理思路和方法排查



### 大佬有没有在hzero的工作流模块有类似这样的需求的案例？1.并行节点拒绝会拒绝所有并行节点。2.驳回之后，重新提交继续当前节点
